!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){const n={canvas:document.querySelector(".visualizer"),download:document.querySelector(".button__download"),mainSection:document.querySelector(".main-controls"),record:document.querySelector(".button__record"),soundClips:document.querySelector(".soundClips"),stop:document.querySelector(".button__stop")};let o;stop.disabled=!0;const r=n.canvas.getContext("2d");if(navigator.mediaDevices.getUserMedia){const e={audio:!0};let t=[];const i=function(e){const i=new MediaRecorder(e);!function(e){o||(o=new AudioContext);const t=o.createMediaStreamSource(e),i=o.createAnalyser();i.fftSize=2048;const c=i.frequencyBinCount,u=new Uint8Array(c);t.connect(i),function e(){const t=n.canvas.width,o=n.canvas.height;requestAnimationFrame(e),i.getByteTimeDomainData(u),r.fillStyle="rgb(255, 255, 255)",r.fillRect(0,0,t,o),r.lineWidth=2,r.strokeStyle="rgb(0, 0, 0)",r.beginPath();const a=1*t/c;let d=0;for(let e=0;e<c;e+=1){const t=u[e]/128*o/2;0===e?r.moveTo(d,t):r.lineTo(d,t),d+=a}r.lineTo(n.canvas.width,n.canvas.height/2),r.stroke()}()}(e),n.record.onclick=function(){i.start(),n.stop.removeAttribute("hidden"),n.record.setAttribute("hidden","true")},n.stop.onclick=function(){i.stop(),n.record.removeAttribute("hidden"),n.stop.setAttribute("hidden","true")},i.onstop=function(){const e=new Date,o=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),r=`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()} ${e.getHours()}:${o}`,i=prompt("Enter a name for your sound clip",r),c=document.createElement("article"),u=document.createElement("h4"),a=document.createElement("audio"),d=document.createElement("a");u.classList.add("recordingHeading"),d.innerText="Download this recording",c.classList.add("clip"),a.setAttribute("controls","");u.innerHTML='<img src="./assets/icons/music.svg">',u.innerHTML+=null===i?"My unnamed clip":i,c.appendChild(u),c.appendChild(a),c.appendChild(d),n.soundClips.appendChild(c),n.soundClips.removeAttribute("hidden"),a.controls=!0;const s=new Blob(t,{type:"audio/ogg; codecs=opus"});t=[];const l=window.URL.createObjectURL(s);a.src=l,d.href=l,d.download=i+".ogg"},i.ondataavailable=function(e){t.push(e.data)}},c=function(e){console.log("The following error occured: "+e)};navigator.mediaDevices.getUserMedia(e).then(i,c)}else console.log("getUserMedia not supported on your browser!")}]);