!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){const o=document.querySelector(".record"),n=document.querySelector(".stop"),r=document.querySelector(".download"),c=document.querySelector(".sound-clips"),l=document.querySelector(".visualizer"),i=document.querySelector(".main-controls");let d;n.disabled=!0;const a=l.getContext("2d");if(navigator.mediaDevices.getUserMedia){console.log("getUserMedia supported.");const e={audio:!0};let t=[],i=function(e){const i=new MediaRecorder(e);!function(e){d||(d=new AudioContext);const t=d.createMediaStreamSource(e),o=d.createAnalyser();o.fftSize=2048;const n=o.frequencyBinCount,r=new Uint8Array(n);t.connect(o),function e(){const t=l.width,c=l.height;requestAnimationFrame(e),o.getByteTimeDomainData(r),a.fillStyle="rgb(200, 200, 200)",a.fillRect(0,0,t,c),a.lineWidth=2,a.strokeStyle="rgb(0, 0, 0)",a.beginPath();let i=1*t/n,d=0;for(let e=0;e<n;e++){let t=r[e]/128*c/2;0===e?a.moveTo(d,t):a.lineTo(d,t),d+=i}a.lineTo(l.width,l.height/2),a.stroke()}()}(e),o.onclick=function(){i.start(),console.log(i.state),console.log("recorder started"),o.style.background="red",n.disabled=!1,o.disabled=!0},n.onclick=function(){i.stop(),console.log(i.state),console.log("recorder stopped"),o.style.background="",o.style.color="",n.disabled=!0,o.disabled=!1},i.onstop=function(e){console.log("data available after MediaRecorder.stop() called.");const o=prompt("Enter a name for your sound clip?","My unnamed clip"),n=document.createElement("article"),l=document.createElement("p"),i=document.createElement("audio"),d=document.createElement("button");n.classList.add("clip"),i.setAttribute("controls",""),d.textContent="Delete",d.className="delete",l.textContent=null===o?"My unnamed clip":o,n.appendChild(i),n.appendChild(l),n.appendChild(d),c.appendChild(n),i.controls=!0;const a=new Blob(t,{type:"audio/ogg; codecs=opus"});t=[];const u=window.URL.createObjectURL(a);i.src=u,console.log("recorder stopped"),r.onclick=function(){var e=document.createElement("a");document.body.appendChild(e),e.style="display: none",e.href=u,e.download="test.ogg",e.click()},d.onclick=function(e){let t=e.target;t.parentNode.parentNode.removeChild(t.parentNode)},l.onclick=function(){const e=l.textContent,t=prompt("Enter a new name for your sound clip?");l.textContent=null===t?e:t}},i.ondataavailable=function(e){t.push(e.data)}},u=function(e){console.log("The following error occured: "+e)};navigator.mediaDevices.getUserMedia(e).then(i,u)}else console.log("getUserMedia not supported on your browser!");window.onresize=function(){l.width=i.offsetWidth},window.onresize()}]);